"use strict";angular.module("commitr.filters",[]).filter("commit_img_resize",[function(){return function(a){return null===a?"":a+"size=100"}}]).filter("time_to_local",[function(){return function(a){var b=new Date(a);return b.toLocaleString()}}]),angular.module("commitr.services",[]).service("GitUser",["$http",function(a){this.getRepos=function(b,c){var d=null===b?"https://api.github.com/repositories?per_page=10":"https://api.github.com/users/"+b+"/repos?per_page=10";a.get(d).success(function(a){c(a)})},this.getAvatarURL=function(b,c){a.get("https://api.github.com/users/"+b).success(function(a){c(a.avatar_url)})}}]).service("GitRepo",["$http",function(a){this.get=function(b,c){a.get("https://api.github.com/repos/"+b).success(function(a){c(a)})},this.getCommits=function(b,c){a.get("https://api.github.com/repos/"+b+"/commits?per_page=10").success(function(a){c(a)})},this.getMvp=function(b,c){a.get("https://api.github.com/repos/"+b+"/contributors?per_page=1").success(function(a){c(a[0])})},this.exists=function(b,c){a.get("https://api.github.com/repos/"+b).success(function(a){c(a.full_name===b)}).error(function(a,b){404===b&&c(!1)})}}]),angular.module("commitr.directives",[]).directive("appVersion",["version",function(a){return function(b,c){c.text(a)}}]),angular.module("commitr.controllers",[]).controller("MainCtrl",["$scope","$rootScope","GitUser","GitRepo",function(a,b,c,d){b.currentView="Main",a.current_repo={},a.current_commits=[],a.search_msg="",a.current_mvp={avatar_url:null},a.user_repos=null===a.user_repos?[{full_name:"test"}]:a.user_repos,a.handle=null===a.handle?"twbs":a.handle;var e=function(a){var b=a.split(/\//g);return 2===b.length&&b[0].length>0&&b[1].length>0};a.$watch("searchBox.str",function(b){return b&&0!==b.length?e(b)?(a.searchBox.msg="",a.searchBox.showMsg=!1,void setTimeout(function(){b===a.searchBox.str&&d.exists(b,function(c){c?a.loadRepo(b):(a.searchBox.msg="That repo does not exist!",a.searchBox.showMsg=!0)})},800)):(a.searchBox.msg="Invalid repo name!",a.searchBox.showMsg=!0,0):0}),a.loadRepo=function(b){console.log("loading repo: "+b),d.get(b,function(b){a.current_repo=b}),d.getCommits(b,function(b){a.current_commits=b}),d.getMvp(b,function(b){a.current_mvp=b,a.handle=b.login,c.getRepos(b.login,function(b){a.user_repos=b})})},a.loadRepo("twbs/bootstrap")}]).controller("AboutCtrl",["$rootScope",function(a){a.currentView="About"}]).controller("ContactCtrl",["$rootScope",function(a){a.currentView="Contact"}]),angular.module("commitr",["ngRoute","commitr.filters","commitr.services","commitr.directives","commitr.controllers"]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"fragments/about.html",controller:"AboutCtrl"}).when("/contact",{templateUrl:"fragments/contact.html",controller:"ContactCtrl"}).otherwise({templateUrl:"fragments/main.html",controller:"MainCtrl"})}]);